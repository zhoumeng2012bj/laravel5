<template>
    <div class="whole">
        <div class="biangewidt" style="word-break:break-all;">
            <div style="text-align:left;"><b class="fijiamn">附件二 维修项目列表</b></div>
            <table class="tablemartop fuhianertextcent" style="font-size: 12px;line-height: 20px;" border="1" cellspacing="0">
                <tr height="40px">
                    <th width="20px">序号</th>
                    <th width="20px" colspan="2">项目</th>
                    <th width="230px">甲方维修项目</th>
                    <th width="160px">房屋资产使用人维修项目</th>
                    <th width="120px">乙方维修项目</th>
                </tr>
                <tr height="20px">
                    <td width="20px" rowspan="7">1</td>
                    <td width="20px" rowspan="7">空<br />调</td>
                    <td width="80px">压缩机</td>
                    <td width="230px" rowspan="7" class="fujiansanteleft">1）除人为原因及正常使用导致损坏的；<br />
                        2）收房后空调的首次清洗、加氟费用。<br />
                        3）其他项：<br />
                        ①、空调室外机高温保护故障问题<br />
                        ②、空调设备部件损坏故障问题<br />
                        ③、收房空调出风弱，制冷（热）效果不好故障问题<br />
                        ④、空调设备老化不制冷（热）故障问题<br />
                        4）由于空调原因，引起的其他需要修缮的，如：棚顶恢复、墙面恢复等。
                    </td>
                    <td width="160px" rowspan="7" class="fujiansanteleft">1）资产使用人人为造成空调损坏的；<br />
                        2）交房后，因资产使用人实际使用，造成空调缺氟需要清洗的；<br />3）因资产使用人自身需求需加装空调，维修费用由资产使用人承担。
                    </td>
                    <td width="120px" rowspan="7" class="fujiansanteleft">招商装修期间，因改动空调或人为造成损坏的。</td>
                </tr>
                <tr height="20px">
                    <td width="80px" class="fujiansantextalig">室外机电路主板</td>
                </tr>
                <tr height="20px">
                    <td width="80px">变频模块</td>
                </tr>
                <tr height="20px">
                    <td width="80px">面板</td>
                </tr>
                <tr height="20px">
                    <td width="80px">电磁阀</td>
                </tr>
                <tr height="20px">
                    <td width="80px">空调管道</td>
                </tr>
                <tr height="20px">
                    <td width="80px">启动器</td>
                </tr>
                <tr height="40px">
                    <td width="20px" rowspan="3">2</td>
                    <td width="20px" rowspan="3">窗<br />户</td>
                    <td width="80px">窗把手</td>
                    <td width="230px" rowspan="3" class="fujiansanteleft">1）收房时，窗户部件存在损坏或故障的；<br />
                        2）资产使用人使用过程中，因窗户零部件年久老化造成损坏或故障的。
                    </td>
                    <td width="160px" rowspan="3" class="fujiansanteleft">资产使用人使用过程中，因操作不当或人为原因造成窗户零部件损坏的。</td>
                    <td width="120px" rowspan="3" class="fujiansanteleft">招商装修期间，人为造成损坏的。</td>
                </tr>
                <tr height="40px">
                    <td width="80px">窗玻璃</td>
                </tr>
                <tr height="40px">
                    <td width="80px">支撑杆</td>
                </tr>
                <tr height="40px">
                    <td width="20px" rowspan="3">3</td>
                    <td width="20px" rowspan="3">入<br />户<br />门<br />、<br />隔<br />断<br />门</td>
                    <td width="80px">门把手</td>
                    <td width="230px" style="text-align: center;">收房时存在问题的。</td>
                    <td width="160px" class="fujiansanteleft">资产使用人入住后且在质保期外的。</td>
                    <td width="120px" class="fujiansanteleft">资产使用人入住后且在质保期内的，由乙方协调厂家进行维修。</td>
                </tr>
                <tr height="40px">
                    <td width="80px">门轴</td>
                    <td width="230px" style="text-align: center;">收房时存在问题的。</td>
                    <td width="160px" class="fujiansanteleft">资产使用人入住后且在质保期外的。</td>
                    <td width="120px" class="fujiansanteleft">资产使用人入住后且在质保期内的，由乙方协调厂家进行维修。</td>
                </tr>
                <tr height="40px">
                    <td width="80px">地弹簧</td>
                    <td width="230px" class="fujiansanteleft">1）收房时存在问题的；<br />
                        2）资产使用人使用过程中，因年久老化造成损坏或故障的。
                    </td>
                    <td width="160px" class="fujiansanteleft">资产使用人使用过程中，因操作不当或人为原因造成损坏的。</td>
                    <td width="120px" class="fujiansanteleft">招商装修期间人为造成损坏的。</td>
                </tr>
                <tr height="40px">
                    <td width="20px" rowspan="3">4</td>
                    <td width="20px" rowspan="3">卫<br />生<br />间<br />及<br />厨<br />房</td>
                    <td width="80px">马桶</td>
                    <td width="230px" rowspan="3" class="fujiansanteleft">1）收房时卫生间存在问题的：<br />
                        ①、水龙头及淋浴花洒故障<br />
                        ②、马桶、浴缸故障<br />
                        ③、换气扇故障<br />
                        ④、浴霸故障<br />
                        ⑤、上下水管道及阀门故障<br />
                        2）卫生间防水层改造前故障。<br />
                        3）收房时厨房台面、厨房内设备设施损坏及后期正常使用造成老化损坏的。
                    </td>
                    <td width="160px" rowspan="2" class="fujiansanteleft">1）质保期外由资产使用人承担维修责任：<br />
                        ①、水龙头及淋浴花洒故障问题<br />
                        ②、马桶、浴缸故障问题或人为损坏需租户承担<br />
                        ③、换气扇故障问题<br />
                        ④、浴霸故障问题<br />                                 2）交房后下水管道造成堵塞的。
                    </td>
                    <td width="120px" rowspan="2" class="fujiansanteleft">质保期内由甲方协调厂家维修：<br />
                        ①、水龙头及淋浴花洒故障；<br />
                        ②、马桶、浴缸故障；<br />
                        ③、换气扇故障；<br />
                        ④、浴霸故障；<br />
                    </td>
                </tr>
                <tr height="40px">
                    <td width="80px">水龙头</td>
                </tr>
                <tr height="40px">
                    <td width="80px">上下水管道</td>
                    <td width="160px" class="fujiansanteleft">如资产使用人改造卫生间造成防水层出现问题的。</td>
                    <td width="120px" class="fujiansanteleft">乙方改造卫生间造成防水层出现问题的。</td>
                </tr>
            </table>
            <div class="PageNext"></div>
            <table class="fuhianertextcent" style="font-size: 12px;line-height: 20px;" border="1" cellspacing="0">
                <tr height="40px">
                    <td width="20px" rowspan="3">5</td>
                    <td width="20px" rowspan="3">电<br />路<br />及<br />灯<br />具</td>
                    <td width="80px">电路</td>
                    <td width="230px" rowspan="3" class="fujiansanteleft">1）收房时电路及灯具出现问题的：<br />
                        ①、电路、配电箱故障<br />
                        ②、墙插、地插故障<br />
                        ③、控制面板故障<br />
                        ④、照明灯、应急灯故障<br />
                        2)使用过程中，房间原始电路、水电表出现问题的。
                    </td>
                    <td width="160px" rowspan="3" class="fujiansanteleft">1）资产使用人入住后，房间电路灯具、灯具、墙插等，出现故障的且在质保期外的；<br />2）资产使用人改造电路、灯具、墙插等，出现故障的。</td>
                    <td width="120px" rowspan="3" class="fujiansanteleft">资产使用人入住后房间电路灯具、灯具、墙插等，出现故障且在质保期内的由乙方协调厂家维修。</td>
                </tr>
                <tr height="40px">
                    <td width="80px">灯具</td>
                </tr>
                <tr height="40px">
                    <td width="80px">墙插</td>
                </tr>
                <tr height="40px">
                    <td width="20px">6</td>
                    <td width="20px" colspan="2">所有漏水项</td>
                    <td width="230px" class="fujiansanteleft">漏雨、防水层损坏及主体管道破裂引发的房间漏水问题或非人为原因导致的漏水问题的维修及造成损失的责任承担。</td>
                    <td width="160px" class="fujiansanteleft">因资产使用人改造卫生间或外窗所在墙体导致防水层损坏、漏雨所产生的维修及造成损失的责任承担。</td>
                    <td width="120px" class="fujiansanteleft">因乙方改造卫生间或外窗所在墙体导致防水层损坏、漏雨所造成的维修及造成损失的责任承担。</td>
                </tr>
                <tr height="40px">
                    <td width="20px">7</td>
                    <td width="20px" colspan="2">入户网线</td>
                    <td width="230px" class="fujiansanteleft">如收房时，房间内无入户网线，须由业主承担网线入户费用。</td>
                    <td width="160px" class="fujiansanteleft">因资产使用人装修，造成入户网线缺失的。</td>
                    <td width="120px" class="fujiansanteleft">因乙方装修，造成入户网线缺失的。</td>
                </tr>
                <tr height="40px">
                    <td width="20px">8</td>
                    <td width="20px" colspan="2">消防</td>
                    <td width="230px" class="fujiansanteleft">首次收房：原有房屋消防（烟感、喷淋、灭火器）不合格、损坏、缺失等的维修，或原有消防不符合物业与消防局的要求产生的新增费用。</td>
                    <td width="160px" class="fujiansanteleft">交房后，因资产使用人改动房间结构造成消防不合格的情况，及在资产使用人使用资产期间物业要求配置的应急灯、安全出口指示牌、灭火器等的。</td>
                    <td width="120px" class="fujiansanteleft">收房后，因乙方改动房间结构造成消防不合格的情况。</td>
                </tr>
            </table>
        </div>
    </div>

</template>
<style>

    .whole{
        margin: auto;
        top: 0;
        right: 0;
        left:0;
        bottom: 0;
        width: 92%;
        height: 20%;
    }
    .whole h1{
        font-size:30px;
    }
    .whole span {
        display: block;}
    .biangewidt{width: 630px;}
    .fujiansanteleft{text-align: left;}
    .fuhianertextcent{text-align: center;}
    .fujiansantextalig{padding: 5px 10px;}
    .fijiamn{font-size: 20px;}
    .tablemartop{margin-top: 20px;font-size: 14px;}
    p{
        font-size: 14px; text-align:left;
        line-height: 2;
        display: block;
    }
    .whole input{border: none;border-bottom: 1px solid#333333;outline: none; font-size:14px!important;text-align:center}
    .whole u{
        font-size:14px!important;
    }
    .whole input[disabled]{
        background-color:white;
    }

</style>
<style media=print>
    .Noprint{display:none;}
    .PageNext{page-break-after: always;}
</style>
<script>
    import {getSaleContractInfo} from '../../api/api';;
    import HistoryBuchong from './HistoryBuchong.vue';
    import ListJieyue from './ListJieyue.vue';
    export default{
        components:{
            HistoryBuchong,
            ListJieyue,
        },
        data(){
            return {
                chengjiaoban:'',
                msg01:'、丙三',
                msg02:'丙方提供居间服务等事宜，',
                msg03:'、丙',
                msg04:'叁',
                free01:'及免租期',
                free02:'二',
                free03:'三',

                historyBuchong:false,
                listJieyue:false,
                hetongtype:1,//合同类型
                free:0,
                property:{
                    flag:null,
                    xsOffice: [{
                        omcId:null,
                        loupanOmcId:null,
                        loudongOmcId:null,
                        loupanName:null,
                        loudongName:null,
                        fanghao:null,
                        weizhi: null,
                        chanquanzhenghao: null,
                        jianzhumianji: null,
                        qianyuemianji: null,

                        leixing: null,
                        hetongid:null,
                    }],
                },
                renter:{
                    flag:null,
                    options1:[
                        {
                            value:null,
                            label:null,
                        }
                    ],
                    chengzufang:'',
                    jujianfang:'',
                    jujianfangtype:'',
                    zuhuleixing:1,
                    //产权人
                    chengzuren:[
                        {
                            faren:'',
                            name:'',
                            idNo:'',
                            tel:'',
                            sex:1,
                            hetongid:null,
                        },
                    ],
                    //收款人
                    shoukuanren:'',
                    zhanghao:'',
                    kaihuhang:'',
                    //代理人
                    dailirenName:'',
                    dailirenTel:'',
                    dailirenSex:1,
                    dailirenId:'',
                    //签约人
                    qianyuerenName:'',
                    qianyuerenTel:'',
                    qianyuerenSex:1,
                    qianyuerenId:'',
                },
                addDate: {
                    iscompletefrzj:'',
                    buchongTiaokuanList:[
                        {
                            content:'',
                        }
                    ],//补充条款
                    dikoujine:'',//合同金额
                    startdate:'',//租期开始时间
                    enddate:'',//租期结束时间
                    xinjianshoufangdate: '',//收房日期
                    xinjianqianyuedate: '',//签约日期
                    shoufangdate: '',//收房日期
                    qianyuedate: '',//签约日期
                    mianzufangshi: [],//免租方式
                    mianzuqiList: [{
                        startdate:'',//免租开始
                        enddate:'',//免租结束
                    }],
                    fukuanFangshiList:[{
                        startdate:'',//开始
                        enddate:'',//结束
                        yajinyue:'',
                        zujinyue:'',
                    }],
                    actualrent:'',
                    yajin:'',//押金
                    yingfuzongzujin:'',//总租金
                    hetongyongjin:'',//佣金
                    tiqianfukuantian:'',//提前付款天数
                    yajinfukuanriqi:'',//押金付款日
                    shouqifukuanri:'',//首期租金付款日
                    erqifukuanri:'',//二期付款
                    sanqifukuanri:'',//三期付款
                    zujinList:[
                        {
                            startdate:'',
                            enddate:'',
                            yuezujin:'',
                            price:'',
                            dizengfangshi:'',
                            dizengliang:'',
                        },
                    ],
                    checkList: [],
                    jiafangfeiyong:[],
                    ispaydeposit:1,
                    nengyuanyajin:'',
                },
                quyu:null,
                nian:null,
                yue:null,
                ri:null,
                da:null,
            }
        },
        methods:{
            contractTitle(){
                switch (this.renter.chengzufang){
                    case '华溯商贸':
                        this.chengjiaoban = '华溯商贸成交版'
                        break;
                    case '幼狮科技':
                        this.chengjiaoban = '幼狮空间成交版'
                        break;
                    case '彭亮':
                        this.chengjiaoban = '幼狮空间成交版'
                        break;
                }
            },
            toDecimal(x) {
                var f = parseFloat(x);
                if (isNaN(f)) {
                    return false;
                }
                var f = Math.round(x * 100) / 100;
                var s = f.toString();
                var rs = s.indexOf('.');
                if (rs < 0) {
                    rs = s.length;
                    s += '.';
                }
                while (s.length <= rs + 2) {
                    s += '0';
                }
                return s;
            },
            daxie(money) {
                if(!money){
                    return '';
                }
                //汉字的数字
                var cnNums = new Array('零', '壹', '贰', '叁', '肆', '伍', '陆', '柒', '捌', '玖');
                //基本单位
                var cnIntRadice = new Array('', '拾', '佰', '仟');
                //对应整数部分扩展单位
                var cnIntUnits = new Array('', '万', '亿', '兆');
                //对应小数部分单位
                var cnDecUnits = new Array('角', '分', '毫', '厘');
                //整数金额时后面跟的字符
                var cnInteger = '整';
                //整型完以后的单位
                var cnIntLast = '元';
                //最大处理的数字
                var maxNum = 999999999999999.9999;
                //金额整数部分
                var integerNum;
                //金额小数部分
                var decimalNum;
                //输出的中文金额字符串
                var chineseStr = '';
                //分离金额后用的数组，预定义
                var parts;
                if (money == '') { return ''; }
                money = parseFloat(money);
                if (money >= maxNum) {
                    //超出最大处理数字
                    return '';
                }
                if (money == 0) {
                    chineseStr = cnNums[0] + cnIntLast + cnInteger;
                    return chineseStr;
                }
                //转换为字符串
                money = money.toString();
                if (money.indexOf('.') == -1) {
                    integerNum = money;
                    decimalNum = '';
                } else {
                    parts = money.split('.');
                    integerNum = parts[0];
                    decimalNum = parts[1].substr(0, 4);
                }
                //获取整型部分转换
                if (parseInt(integerNum, 10) > 0) {
                    var zeroCount = 0;
                    var IntLen = integerNum.length;
                    for (var i = 0; i < IntLen; i++) {
                        var n = integerNum.substr(i, 1);
                        var p = IntLen - i - 1;
                        var q = p / 4;
                        var m = p % 4;
                        if (n == '0') {
                            zeroCount++;
                        } else {
                            if (zeroCount > 0) {
                                chineseStr += cnNums[0];
                            }
                            //归零
                            zeroCount = 0;
                            chineseStr += cnNums[parseInt(n)] + cnIntRadice[m];
                        }
                        if (m == 0 && zeroCount < 4) {
                            chineseStr += cnIntUnits[q];
                        }
                    }
                    chineseStr += cnIntLast;
                }
                //小数部分
                if (decimalNum != '') {
                    var decLen = decimalNum.length;
                    for (var i = 0; i < decLen; i++) {
                        var n = decimalNum.substr(i, 1);
                        if (n != '0') {
                            chineseStr += cnNums[Number(n)] + cnDecUnits[i];
                        }
                    }
                }
                if (chineseStr == '') {
                    chineseStr += cnNums[0] + cnIntLast + cnInteger;
                } else if (decimalNum == '') {
                    chineseStr += cnInteger;
                }
                return chineseStr;
            },
            daxie2(number){
                let arr = [ '一', '二', '三', '四', '五', '六', '七', '八', '九'];
                return arr[number];
            },
            year(riqi){
                if(riqi!=null){
                    return new Date(riqi).getFullYear();
                }else{
                    return '';
                }
            },
            month(riqi){
                if(riqi!=null){
                    if(new Date(riqi).getMonth()+1 <10 ){
                        return '0'+(new Date(riqi).getMonth()+1);
                    }else{
                        return new Date(riqi).getMonth()+1
                    }
                }else{
                    return '';
                }
            },
            day(riqi){
                if(riqi!=null){
                    if(new Date(riqi).getDate()+1 <10 ){
                        return '0'+(new Date(riqi).getDate());
                    }else{
                        return new Date(riqi).getDate()
                    }
                }else{
                    return '';
                }

            },
            //根据url得到的合同ID，来获取数据
            getSaleContract(id){
                getSaleContractInfo(id).then((res)=>{
                    if(res.data.code=='200'){
                        //把数据分别赋值给三个组件的变量
                        //console.log(res.data)
                        this.fuzhi(res);

                    }else {
                        this.$message({
                            message: '获取数据失败',
                            type: 'error'
                        });
                    }
                })
            },
            intToChinese( str ) {
                str = str+'';
                var len = str.length-1;
                var idxs = ['','十','百','千','万','十','百','千','亿','十','百','千','万','十','百','千','亿'];
                var num = ['零','壹','贰','叁','肆','伍','陆','柒','捌','玖'];
                return str.replace(/([1-9]|0+)/g,function( $, $1, idx, full) {
                    var pos = 0;
                    if( $1[0] != '0' ){
                        pos = len-idx;
                        if( idx == 0 && $1[0] == 1 && idxs[len-idx] == '十'){
                            return idxs[len-idx];
                        }
                        return num[$1[0]] + idxs[len-idx];
                    } else {
                        var left = len - idx;
                        var right = len - idx + $1.length;
                        if( Math.floor(right/4) - Math.floor(left/4) > 0 ){
                            pos = left - left%4;
                        }
                        if( pos ){
                            return idxs[pos] + num[$1[0]];
                        } else if( idx + $1.length >= len ){
                            return '';
                        }else {
                            return num[$1[0]]
                        }
                    }
                });
            },
            //获取区域的中
            getquyu(str1){
                var str1 = str1;
                var str2 = "区";
                var s = str1.indexOf(str2);
                var str3 = str1.substr(3,s);
                //alert(111);
                //alert(str3);
                return(str3);
            },
            fuzhi(res){
                //console.log(2222);
                //console.log(res.data.data);
                this.id = res.data.data.id;
                this.property.xsOffice = res.data.data.xsOffice;
                if(res.data.data.chengzuren.length>0){
                    this.renter.chengzuren = res.data.data.chengzuren;
                }
                //this.renter.chengzuren = res.data.data.chengzuren;
                this.renter.chengzufang = res.data.data.chengzufang;
                this.contractTitle();
                this.renter.chuzufang = res.data.data.chuzufang?res.data.data.chuzufang+'有限公司':'';
                this.renter.jujianfangtype = res.data.data.jujianfangtype;
                this.renter.jujianfang = res.data.data.jujianfang;
                this.renter.shoukuanren = res.data.data.shoukuanren;
                this.renter.kaihuhang = res.data.data.kaihuhang;
                this.renter.zhanghao = res.data.data.zhanghao;
                this.renter.zuhuleixing = res.data.data.zuhuleixing;
                this.renter.shoukuanren = res.data.data.shoukuanren;
                this.renter.zhanghao = res.data.data.zhanghao;
                this.renter.qianyuerenName = res.data.data.qianyuerenName;
                this.renter.qianyuerenTel = res.data.data.qianyuerenTel;
                this.renter.qianyuerenSex = res.data.data.qianyuerenSex;
                this.renter.qianyuerenId = res.data.data.qianyuerenId;
                this.hetongtype = res.data.data.hetongtype;
                if(this.hetongtype==1){
                    this.msg01='两';
                    this.msg02='';
                    this.msg03='';
                    this.msg04='两';
                }
                this.addDate.actualrent = res.data.data.actualrent;
                if(res.data.data.startdate != ''){
                    this.addDate.startdate = res.data.data.startdate;
                }
                if(res.data.data.enddate != ''){
                    this.addDate.enddate = res.data.data.enddate;
                }
                if(res.data.data.shoufangdate != ''){
                    this.addDate.shoufangdate = res.data.data.shoufangdate;
                }
                if(res.data.data.qianyueDate != ''){
                    this.addDate.qianyueDate = res.data.data.qianyueDate;
                }
                this.addDate.mianzufangshi = res.data.data.mianzufangshi;
                this.addDate.mianzuqiList = res.data.data.mianzuqiList;
                if(this.addDate.mianzuqiList.length==0){
                    this.free01 = '';
                    this.free02 = '一';
                    this.free03 = '二';
                }

                this.addDate.fukuanFangshiList = res.data.data.fukuanFangshiList;
                this.addDate.fukuanFangshiList.sort(function(a,b){
                    return a.startdate-b.startdate})
                this.addDate.yajin = res.data.data.yajin;
                this.addDate.yingfuzongzujin = res.data.data.yingfuzongzujin;
                this.addDate.hetongyongjin = res.data.data.hetongyongjin;
                this.addDate.tiqianfukuantian = res.data.data.tiqianfukuantian;
                if(res.data.data.yajinfukuanriqi != ''){
                    this.addDate.yajinfukuanriqi = res.data.data.yajinfukuanriqi;
                }
                this.addDate.shouqifukuanri = res.data.data.shouqifukuanri;
                this.addDate.erqifukuanri = res.data.data.erqifukuanri;
                this.addDate.sanqifukuanri = res.data.data.sanqifukuanri;
                this.addDate.iscompletefrzj = res.data.data.iscompletefrzj;
                if(res.data.data.zujinList != ''){
                    this.addDate.zujinList = res.data.data.zujinList;
                    this.addDate.zujinList.sort(function(a,b){
                        return a.startdate-b.startdate})
                }
                this.addDate.checkList = res.data.data.checkList;
                this.addDate.jiafangfeiyong = res.data.data.jiafangfeiyong;
                this.addDate.ispaydeposit = res.data.data.ispaydeposit;
                this.addDate.nengyuanyajin = res.data.data.nengyuanyajin;
                this.nian = res.data.data.nian;
                this.yue = res.data.data.yue;
                this.ri = res.data.data.ri;
                this.da = res.data.data.da;
                //alert(res.data.data.xsOffice[0].weizhi);
                var str = res.data.data.xsOffice[0].weizhi;
                this.quyu = this.getquyu(str);
            },
        },
        mounted(){
            //
            //获取合同的详细信息
            this.getSaleContract(this.$route.query);
            document.title = '合同编号：'+this.$route.query.bianhao;
            function  hello() {
                window.print()
            }
            if(this.$route.query.isdump==1){
                this.historyBuchong = false;
                setTimeout(hello,1000);
            }else if(this.$route.query.isdump==2){
                this.historyBuchong = false;
            }else{
                this.historyBuchong = true;
                this.listJieyue = true;
            }
        }
    }
</script>